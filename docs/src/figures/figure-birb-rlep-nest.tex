\begin{juliacode}
s = 0
p = pos[i]
Stepper(
  seek(j) = (
    p = search(abs(idx), j)),
  stride = idx[p],
  body = Switch(
    Case(
      cond = idx[p] > 0,
      body = Run(
        body = vals[p]))
    Case(
      body = Lookup(
        body(j) = vals[p + j - s])))
  next = s = abs(idx[p]); p += 1;)
\end{juliacode}