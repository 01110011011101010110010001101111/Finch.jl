\begin{figure}
    \center
    \begin{subfigure}[t]{\linewidth}
      \begin{minipage}[t]{0.5\linewidth-2pt}
      \input{figure-comp-template-list.tex}
      \end{minipage}\hspace{4pt}%
      \begin{minipage}[t]{0.5\linewidth-2pt}
      \input{figure-comp-finch-list.tex}
      \end{minipage}
      \begin{minipage}[t]{0.5\linewidth-2pt}
      \input{figure-comp-template-band.tex}
      \end{minipage}\hspace{4pt}%
      \begin{minipage}[t]{0.5\linewidth-2pt}
      \input{figure-comp-finch-band.tex}
      \end{minipage}
      \caption{Comparing iteration interfaces. On left, an iterator-over-nonzeros
      implementation of a sorted coordinate list and our banded format. On right,
      equivalent Looplet declarations (simplified from Figures
      \ref{fig:structure:uniform-list-walk} and \ref{fig:structure:band}) that
      expose more structure to the compiler.}\label{fig:dot-comp:protocols}
    \end{subfigure}
  
    \begin{subfigure}[t]{\linewidth}
      \begin{minipage}[t]{0.5\linewidth-2pt}
        \input{figure-comp-template-dot.tex}
      \end{minipage}\hspace{4pt}%
      \begin{minipage}[t]{0.5\linewidth-2pt}
        \input{figure-comp-finch-dot.tex}
      \end{minipage}
      \caption{The resulting dot-product code from iterator-over-nonzeros (left)
      and Looplets (right). On left, a (straightforward) Julia translation of TACO
      output, where we have replaced the TACO compressed level functions with that
      of our hypothetical banded matrix format.  On right, simplified Finch
      output. }\label{fig:dot-comp:dot}
    \end{subfigure}
  
    \begin{subfigure}{\linewidth}
      \begin{minipage}[t]{0.5\linewidth-2pt}
        \input{figure-comp-template-touched.tex}
      \end{minipage}\hspace{4pt}%
      \begin{minipage}[t]{0.5\linewidth-2pt}
        \input{figure-comp-finch-touched.tex}
      \end{minipage}
      \caption{An example execution of each algorithm. The
      nonzero locations processed by each dot product inner loop are shown in red,
      unprocessed nonzeros are shown in black. The iterator-over-nonzeros code
      (left) processes nonzeros from both lists till one is exhausted. The looplet
      code (right) skips to the start of the block, then randomly accesses it,
      thus improving asymptotic efficiency.}\label{fig:dot-comp:touch}
    \end{subfigure}
  
    \caption{Coiteration comparison between an iterator-over-nonzeros approach
    (left) and our Looplets approach (right) to coiteration over a sparse list and sparse
    band format.  The list format holds many scattered nonzeros, while the band
    format holds a single dense nonzero region. Elsewhere we describe our VBL
    format that holds multiple bands.}\label{fig:dot-comp}
  \end{figure}